(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{38:function(e,t,a){e.exports=a(57)},43:function(e,t,a){},49:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),o=a(26),i=(a(43),a(13)),s=a(6),u=a(7),m=a(9),d=a(8),h=a(5),p=a(19),E=a(15),b=a(59),v=a(60),f=a(21),g=a.n(f),y=a(28);function j(e){return{type:"REQUEST_CURRENCIES_SUCCESS",data:e}}a(49);var O=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={email:"",password:"",disabled:!0,redirect:!1},e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.addLogin=e.addLogin.bind(Object(E.a)(e)),e.verifyEmail=e.verifyEmail.bind(Object(E.a)(e)),e.verifyPassword=e.verifyPassword.bind(Object(E.a)(e)),e}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(p.a)({},n,a)),this.verifyEmail()&&this.verifyPassword()?this.setState({disabled:!1}):this.setState({disabled:!0})}},{key:"verifyEmail",value:function(){var e=this.state.email.split("");return e.includes("@")&&e.includes(".")&&"."!==e[e.length-1]}},{key:"verifyPassword",value:function(){return this.state.password.length>=5}},{key:"addLogin",value:function(){var e=this.state.email;this.setState({redirect:!0}),(0,this.props.getEmail)(e)}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.disabled;return e.redirect?r.a.createElement(h.a,{to:"/carteira"}):r.a.createElement("section",{className:"login"},r.a.createElement("img",{src:"https://img.icons8.com/cotton/64/000000/coin-wallet--v1.png",alt:"wallet"}),r.a.createElement(b.a,{className:"login_form"},r.a.createElement(b.a.Group,{className:"mb-3"},r.a.createElement(b.a.Label,{htmlFor:"email"},"Email"),r.a.createElement(b.a.Control,{name:"email",type:"email",value:t,onChange:this.handleChange,"data-testid":"email-input",placeholder:"Insira seu email",id:"email"})),r.a.createElement(b.a.Group,{style:{margin:"0"},className:"form_password"},r.a.createElement(b.a.Label,{htmlFor:"password"},"Senha"),r.a.createElement(b.a.Control,{name:"password",type:"password",value:a,onChange:this.handleChange,"data-testid":"password-input",placeholder:"Insira sua senha",id:"password"})),r.a.createElement(b.a.Text,{className:"text-muted"},"A senha deve possuir seis caracteres ou mais."),r.a.createElement(v.a,{className:"form_button",variant:"success",type:"button",disabled:n,onClick:this.addLogin},"Entrar")))}}]),a}(n.Component),C=Object(i.b)(null,(function(e){return{getEmail:function(t){return e({type:"GET_LOGIN",payload:{email:t}})}}}))(O),w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currencies,a=e.value,n=e.handleChange,c=t.filter((function(e){return"BRLT"!==e.codein}));return r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"currency"},"Moeda",r.a.createElement("div",null,r.a.createElement("select",{className:"form-control",id:"currency",name:"currency",value:a,onChange:n},c.map((function(e,t){return r.a.createElement("option",{key:t,value:e.code},e.code)}))))))}}]),a}(n.Component),T=Object(i.b)((function(e){return{currencies:e.wallet.currencies}}))(w),x=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.handleChange;return r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"payment"},"Pagamento",r.a.createElement("select",{className:"form-control",id:"payment",name:"method",value:t,onChange:a},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))))}}]),a}(n.Component),R=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.handleChange;return r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"category"},"Tag",r.a.createElement("select",{className:"form-control",id:"category",name:"tag",value:t,onChange:a},r.a.createElement("option",{id:"category"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{id:"category"},"Lazer"),r.a.createElement("option",{id:"category"},"Trabalho"),r.a.createElement("option",{id:"category"},"Transporte"),r.a.createElement("option",{id:"category"},"Sa\xfade"))))}}]),a}(n.Component),k=(a(52),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.description,n=e.handleChange;return r.a.createElement("section",{className:"description"},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"expense"},"Valor",r.a.createElement(b.a.Control,{type:"number",id:"expense",name:"value",min:"0",value:t,onChange:n,placeholder:"0.00"}))),r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement(b.a.Control,{type:"text",id:"description",name:"description",value:a,maxLength:"25",onChange:n,placeholder:"Insira uma descri\xe7\xe3o"}))))}}]),a}(n.Component)),S=(a(53),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.userEmail,a=e.valueTotal;return r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement("img",{src:"https://img.icons8.com/windows/32/000000/email-open.png",alt:"email icon",width:"30px"})," ",r.a.createElement("span",{"data-testid":"email-field"},t)),r.a.createElement("div",null,r.a.createElement("img",{src:"https://img.icons8.com/ios/50/000000/money--v1.png",alt:"money icon",width:"30px"})," ",r.a.createElement("span",{"data-testid":"total-field",className:"header_total"},"R$ ".concat(parseFloat(a).toFixed(2)))," ",r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}}]),a}(n.Component)),L=Object(i.b)((function(e){return{userEmail:e.user.email,currencies:e.wallet.expenses,valueTotal:e.wallet.sumTotal}}))(S),N=a(58),_=(a(54),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).renderTable=e.renderTable.bind(Object(E.a)(e)),e}return Object(u.a)(a,[{key:"renderTable",value:function(){var e=this.props,t=e.currencies,a=e.removeItem;return t.map((function(e,t){var n=e.exchangeRates[e.currency].name.split("/")[0],c=e.exchangeRates[e.currency].ask,l=parseFloat(c).toFixed(2),o=parseFloat(e.value*c).toFixed(2);return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,"".concat(e.value)),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,o),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement(v.a,{variant:"danger","data-testid":"delete-btn",type:"button",onClick:function(){return a(e.id)}},"Deletar")))}))}},{key:"render",value:function(){return this.props.currencies.length>0?r.a.createElement("div",{className:"table"},r.a.createElement(N.a,{striped:!0,hover:!0,size:"sm",variant:"success",id:"columns"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"Pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio"),r.a.createElement("th",null,"Convers\xe3o"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"Excluir"))),r.a.createElement("tbody",null,this.renderTable()))):""}}]),a}(n.Component)),A=Object(i.b)((function(e){return{currencies:e.wallet.expenses}}),(function(e){return{removeItem:function(t){return e(function(e){return{type:"DELETE_ITEM",payload:e}}(t))}}}))(_),U=(a(55),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",exchangeRates:{}},e.handleChange=e.handleChange.bind(Object(E.a)(e)),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrencies)()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"render",value:function(){var e=this.props,t=e.currencies,a=e.updateValueTotal,n=0;t.forEach((function(e){n+=Number(e.value)*Number(e.exchangeRates[e.currency].ask)})),a(n);var c=this.props.saveData,l=this.state,o=l.value,i=l.description,s=l.currency,u=l.method,m=l.tag,d=l.exchangeRates;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement(b.a,{className:"form"},r.a.createElement(k,{value:o,description:i,handleChange:this.handleChange}),r.a.createElement("div",{className:"separator"}),r.a.createElement("div",{className:"form_inputs"},r.a.createElement(T,{value:s,handleChange:this.handleChange}),r.a.createElement(x,{value:u,handleChange:this.handleChange}),r.a.createElement(R,{value:m,handleChange:this.handleChange})),r.a.createElement(v.a,{type:"button",variant:"success",onClick:function(){return c({value:o,description:i,currency:s,method:u,tag:m,exchangeRates:d})}},"Adicionar despesa")),r.a.createElement(A,null))}}]),a}(r.a.Component)),D=Object(i.b)((function(e){return{userEmail:e.user.email,currencies:e.wallet.expenses}}),(function(e){return{fetchCurrencies:function(){return e(function(){var e=Object(y.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REQUEST_API"}),e.next=4,fetch("https://economia.awesomeapi.com.br/json/all");case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,t(j(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:"REQUEST_CURRENCIES_ERROR",error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())},saveData:function(t){return e(function(e){return function(){var t=Object(y.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return n=t.sent,t.next=5,n.json();case 5:delete(r=t.sent).USDT,e.exchangeRates=r,a({type:"SAVE_DATA",payload:e});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},updateValueTotal:function(t){return e(function(e){return{type:"UPDATE_VALUE_TOTAL",payload:e}}(t))}}}))(U),I=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:C}),r.a.createElement(h.b,{path:"/carteira",component:D}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(17),G=a(35),P=a(36),V=a(10),M={email:""};var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOGIN":return Object(V.a)(Object(V.a)({},e),{},{email:t.payload.email});default:return e}},B=a(37),W={currencies:[],expenses:[],isLoading:!1,error:null,sumTotal:0};function z(e,t){return e.filter((function(e){return e.id!==t}))}var J=Number("-1");var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_API":return Object(V.a)(Object(V.a)({},e),{},{isLoading:!0});case"REQUEST_CURRENCIES_SUCCESS":return Object(V.a)(Object(V.a)({},e),{},{currencies:Object.values(t.data),isLoading:!1});case"REQUEST_CURRENCIES_ERROR":return Object(V.a)(Object(V.a)({},e),{},{error:t.error});case"SAVE_DATA":return J+=1,Object(V.a)(Object(V.a)({},e),{},{expenses:[].concat(Object(B.a)(e.expenses),[Object(V.a)(Object(V.a)({},t.payload),{},{id:J})])});case"UPDATE_VALUE_TOTAL":return Object(V.a)(Object(V.a)({},e),{},{sumTotal:t.payload});case"DELETE_ITEM":return Object(V.a)(Object(V.a)({},e),{},{expenses:z(e.expenses,t.payload)});default:return e}},q=Object(F.combineReducers)({user:Q,wallet:$}),H=Object(F.createStore)(q,Object(G.composeWithDevTools)(Object(F.applyMiddleware)(P.a)));a(56);l.a.render(r.a.createElement(i.a,{store:H},r.a.createElement(o.a,null,r.a.createElement(I,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.fe0c3a89.chunk.js.map